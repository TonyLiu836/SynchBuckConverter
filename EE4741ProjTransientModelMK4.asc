Version 4
SHEET 1 2120 1764
WIRE -64 496 -128 496
WIRE 64 496 0 496
WIRE 256 496 64 496
WIRE 576 496 464 496
WIRE 464 528 464 496
WIRE 64 544 64 496
WIRE -128 608 -128 496
WIRE -64 608 -128 608
WIRE 384 608 192 608
WIRE 416 608 384 608
WIRE 1120 640 1072 640
WIRE 1248 640 1120 640
WIRE 832 656 800 656
WIRE 1072 672 1072 640
WIRE 1072 672 992 672
WIRE -128 688 -128 608
WIRE -64 688 -128 688
WIRE 256 688 256 560
WIRE 256 688 192 688
WIRE 464 688 464 624
WIRE 464 688 256 688
WIRE 608 688 464 688
WIRE 736 688 688 688
WIRE 800 688 800 656
WIRE 800 688 736 688
WIRE 912 688 800 688
WIRE 1024 704 992 704
WIRE 1072 704 1024 704
WIRE 1024 720 1024 704
WIRE 928 736 848 736
WIRE 976 752 976 736
WIRE 976 752 928 752
WIRE -64 768 -96 768
WIRE 336 768 192 768
WIRE 464 768 464 688
WIRE 928 784 928 752
WIRE 736 800 736 688
WIRE -128 832 -128 768
WIRE 336 848 336 768
WIRE 416 848 336 848
WIRE 64 912 64 832
WIRE 736 928 736 864
WIRE 832 928 736 928
WIRE 848 928 848 736
WIRE 848 928 832 928
WIRE 928 928 928 864
WIRE 928 928 848 928
WIRE 1024 928 1024 800
WIRE 1024 928 928 928
WIRE 640 960 368 960
WIRE 1024 960 1024 928
WIRE 1120 960 1024 960
WIRE 144 976 16 976
WIRE 368 992 368 960
WIRE 1072 1008 1072 704
WIRE 1248 1008 1248 640
WIRE 512 1072 480 1072
WIRE 672 1072 592 1072
WIRE 768 1072 736 1072
WIRE -96 1088 -96 768
WIRE 16 1104 16 976
WIRE 128 1120 48 1120
WIRE 640 1120 640 960
WIRE -96 1136 -96 1088
WIRE -16 1136 -96 1136
WIRE 768 1136 768 1072
WIRE 768 1136 672 1136
WIRE 816 1136 768 1136
WIRE 1072 1136 1072 1072
WIRE 1072 1136 896 1136
WIRE 1248 1136 1248 1072
WIRE 1248 1136 1072 1136
WIRE 384 1152 48 1152
WIRE 480 1152 480 1072
WIRE 480 1152 384 1152
WIRE 608 1152 480 1152
WIRE 784 1168 672 1168
WIRE 128 1184 128 1120
WIRE 16 1200 16 1168
WIRE 784 1200 784 1168
WIRE 640 1216 640 1184
FLAG -128 832 0
FLAG 576 576 0
FLAG 64 912 0
FLAG 832 656 Vout
IOPIN 832 656 Out
FLAG 784 1280 0
FLAG 384 1152 Vc
FLAG 128 1264 0
FLAG -96 1088 VPWM
FLAG 384 608 VGS1
FLAG 336 848 VGS2
FLAG 832 928 0
FLAG 464 864 0
FLAG 144 1056 0
FLAG 368 1072 0
FLAG 640 1296 0
FLAG 16 1280 0
SYMBOL ind 592 704 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 680n
SYMATTR SpiceLine Ipk=2 Rser=0.031 Rpar=0 Cpar=0
SYMBOL cap 720 800 R0
SYMATTR InstName C1
SYMATTR Value 22µ
SYMATTR SpiceLine V=6.3 Irms=0 Rser=0.0008 Lser=0 mfg="TDK" pn="C3225X5ROJ226M" type="X5R"
SYMBOL res 1008 704 R0
SYMATTR InstName Ro
SYMATTR Value 2
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL voltage -128 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 28 29 Left 2
WINDOW 3 30 79 Left 2
SYMATTR InstName V1
SYMATTR Value 8V
SYMBOL schottky -64 512 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 272 560 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=4 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GRM011R60G103KE01" type="X5R"
SYMBOL nmos 416 528 R0
SYMATTR InstName Q1
SYMATTR Value IRF7468
SYMBOL nmos 416 768 R0
SYMATTR InstName Q2
SYMATTR Value IRF7456
SYMBOL voltage 576 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL res 912 1120 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1p
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=4
SYMBOL res 608 1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2s
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=4
SYMBOL voltage 784 1184 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref1
SYMATTR Value 3.3V
SYMBOL voltage 128 1168 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vramp
SYMATTR Value PULSE(0 4 0 0.5u 0 0 0.5u)
SYMBOL voltage 144 960 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 10V
SYMBOL voltage 640 1312 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 10V
SYMBOL voltage 368 976 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 10V
SYMBOL voltage 16 1296 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 10V
SYMBOL OpAmps\\LT1230 640 1088 M0
SYMATTR InstName U1
SYMBOL OpAmps\\LT1230 16 1072 M0
SYMATTR InstName U2
SYMBOL PowerProducts\\LTC4442 64 688 R0
SYMATTR InstName U3
SYMBOL cap 736 1056 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2s
SYMATTR Value 0.22µ
SYMATTR SpiceLine V=500 Irms=1.01 Rser=0.01359 Lser=0 mfg="KEMET" pn="C2225C224KCRAC" type="X7R"
SYMBOL SPDT 896 688 R270
SYMATTR InstName U4
SYMBOL res 1104 784 R0
SYMATTR InstName Ro1
SYMATTR Value 2
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL res 1104 704 R0
SYMATTR InstName Ro2
SYMATTR Value 2
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL res 1104 624 R0
SYMATTR InstName Ro3
SYMATTR Value 2
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL res 1104 864 R0
SYMATTR InstName Ro4
SYMATTR Value 2
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL voltage 928 768 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -123 212 Left 2
SYMATTR Value PULSE(0 3 0 0 0 100u 200u)
SYMATTR InstName V3
SYMBOL diode 1232 1008 R0
SYMATTR InstName D3
SYMATTR Value D3
SYMBOL diode 1056 1008 R0
SYMATTR InstName D2
SYMATTR Value D2
TEXT 416 416 Left 2 !.tran 400u startup
TEXT 744 464 Left 2 !.subckt SPDT COM NO NC POS NEG\nS1 COM NO POS NEG MYSW1\nS2 COM NC NEG POS MYSW2\n.model MYSW1 SW(Ron=.01 Roff=1000Meg Vh=.25 Vt=.5)\n.model MYSW2 SW(Ron=.01 Roff=1000Meg Vh=.25 Vt=-.5)\n.ends
TEXT 968 1176 Left 2 !.model D2 D(Ron = 0 Vfwd = 0)
TEXT 976 1216 Left 2 !.model D3 D(Ron = 0 Vfwd = 0)
